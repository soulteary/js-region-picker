(function(){var d=d||{};d.scope={};d.createTemplateTagFirstArg=function(a){return a.raw=a};d.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};d.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};d.ASSUME_ES5=!1;d.ASSUME_NO_NATIVE_MAP=!1;d.ASSUME_NO_NATIVE_SET=!1;
d.SIMPLE_FROUND_POLYFILL=!1;d.ISOLATE_POLYFILLS=!1;d.FORCE_POLYFILL_PROMISE=!1;d.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;d.defineProperty=d.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
d.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};d.global=d.getGlobal(this);d.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");d.TRUST_ES6_POLYFILLS=!d.ISOLATE_POLYFILLS||d.IS_SYMBOL_NATIVE;d.polyfills={};d.propertyToPolyfillSymbol={};
d.POLYFILL_PREFIX="$jscp$";d.polyfill=function(a,b,c,k){b&&(d.ISOLATE_POLYFILLS?d.polyfillIsolated(a,b,c,k):d.polyfillUnisolated(a,b,c,k))};d.polyfillUnisolated=function(a,b){var c=d.global;a=a.split(".");for(var k=0;k<a.length-1;k++){var m=a[k];if(!(m in c))return;c=c[m]}a=a[a.length-1];k=c[a];b=b(k);b!=k&&null!=b&&d.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
d.polyfillIsolated=function(a,b,c){var k=a.split(".");a=1===k.length;var m=k[0];m=!a&&m in d.polyfills?d.polyfills:d.global;for(var n=0;n<k.length-1;n++){var p=k[n];if(!(p in m))return;m=m[p]}k=k[k.length-1];c=d.IS_SYMBOL_NATIVE&&"es6"===c?m[k]:null;b=b(c);null!=b&&(a?d.defineProperty(d.polyfills,k,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===d.propertyToPolyfillSymbol[k]&&(a=1E9*Math.random()>>>0,d.propertyToPolyfillSymbol[k]=d.IS_SYMBOL_NATIVE?d.global.Symbol(k):d.POLYFILL_PREFIX+a+"$"+
k),d.defineProperty(m,d.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:b})))};d.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var k=d.checkStringArgs(this,b,"startsWith");b+="";var m=k.length,n=b.length;c=Math.max(0,Math.min(c|0,k.length));for(var p=0;p<n&&c<m;)if(k[c++]!=b[p++])return!1;return p>=n}},"es6","es3");
d.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var k=a.length,m=0;m<k;m++){var n=a[m];if(b.call(c,n,m,a))return{i:m,v:n}}return{i:-1,v:void 0}};d.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return d.findInternal(this,b,c).i}},"es6","es3");
d.polyfill("Array.from",function(a){return a?a:function(b,c,k){c=null!=c?c:function(t){return t};var m=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof n){b=n.call(b);for(var p=0;!(n=b.next()).done;)m.push(c.call(k,n.value,p++))}else for(n=b.length,p=0;p<n;p++)m.push(c.call(k,b[p],p));return m}},"es6","es3");d.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
d.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var k=this;k instanceof String&&(k=String(k));var m=k.length;c=c||0;for(0>c&&(c=Math.max(c+m,0));c<m;c++){var n=k[c];if(n===b||Object.is(n,b))return!0}return!1}},"es7","es3");d.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==d.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
window.RegionPicker=function(a,b){function c(f){g.Options&&g.Options.updater&&"function"===typeof g.Options.updater&&(g.Selected=g.Selected.sort(function(e,h){return e.code<h.code?-1:e.code>h.code?1:0}),g.Options.updater(g.Selected,f,g))}function k(){for(var f=g.RegionList.map(function(q){return[(q.name||"").slice(0,1).toUpperCase(),(q.code||"").slice(0,1).toUpperCase()]}).reduce(function(q,r){q[r[0]]=!0;q[r[1]]=!0;return q},{}),e="",h=65;90>=h;h++){var l=String.fromCharCode(h);e=f[l]?e+('<span class="clickable picker-letter" data-code="'+
l+'">'+l+" </span>"):e+('<span class="clickable picker-letter-disabled">'+l+" </span>")}document.querySelector("#"+g.ComponentId+" .region-letters-container").innerHTML=e}function m(){var f=g.RegionList.map(function(e){var h=e.code,l=e.cname;return'\n        <div class="region-picker-item">\n          <label for="region-picker-'+h+'" class="clickable flex flex-row align-center" data-code="'+h+'">\n            <div class="region-checkbox">\n                <input id="region-picker-'+h+'" type="checkbox" name="region-picker" value="'+
h+'" />\n                <span class="region-checkbox-elem"></span>\n            </div>\n            <img src="'+g.BaseDir+"assets/region-icon/"+("uk"===h?"gb":"tw"===h?"cn":h)+'.svg" loading="lazy" alt="'+l+'" />\n            <div class="flex flex-col">\n                <div class="region-picker-item-cname">'+l+'</div>\n                <div class="region-picker-item-name">'+e.name+"</div>\n            </div>\n          </label>\n        </div>"});document.querySelector("#"+g.ComponentId+" .region-list-conatiner").innerHTML=
f.join("")}function n(f){document.querySelectorAll("#"+g.ComponentId+" .region-picker-item").forEach(function(e){if("*"===f)e.classList.remove("hide");else{var h=e.querySelector(".region-picker-item-name").innerText,l=e.querySelector("label").getAttribute("data-code");h.startsWith(f)||l.startsWith(f)?e.classList.remove("hide"):e.classList.add("hide")}})}function p(){var f=1===g.Selected.length,e=g.Selected.map(function(h,l){var q=h.cname,r=h.code;h.icon="uk"===r?"gb":"tw"===r?"cn":r;return'\n        <div class="region-item-selected '+
(0===l&&f?"region-item-selected-freezed":"")+' flex flex-row flex-center" data-code="'+r+'">\n          <span>'+q+'</span>\n          <img class="'+(f?"disallow":"clickable")+' btn-remove-selected" src="'+g.BaseDir+'assets/img/icon-close.svg" alt="" />\n        </div>'});c("change");document.querySelector("#"+g.ComponentId+" .region-selected-container").innerHTML=e.join("")}function t(f){if(f){var e=g.Selected,h=e.findIndex(function(l){return l.code===f});e.splice(h,1);g.Selected=e}}function x(){document.getElementById(g.ComponentId).addEventListener("click",
function(f){var e=f.target;e&&(e.closest(".region-selected-container")?(f=(e.className||"").trim(),-1!==f.indexOf("btn-remove-selected")&&-1===f.indexOf("disallow")&&(e=e.parentElement.getAttribute("data-code"),t(e),p(),v())):e.closest(".btn-select-all")?(f.preventDefault(),g.Selected=[],u("all")):e.closest(".btn-reset")?(f.preventDefault(),g.Selected=[],g.Options.preselected&&u(g.Options.preselected)):e.closest(".btn-submit")&&(f.preventDefault(),w()))})}function y(){document.querySelector("#"+g.ComponentId+
" .region-list-conatiner").addEventListener("click",function(f){(f=f.target.closest("label"))&&f.matches(".region-picker-item label")&&setTimeout(function(){var e=Array.from(document.getElementsByName("region-picker")).filter(function(h){return h.checked}).map(function(h){return h.value});g.Selected=g.RegionList.filter(function(h){return e.includes(h.code)});p()},10)})}function z(){var f=document.querySelector("#"+g.ComponentId+" .region-letters-container"),e=Array.from(f.querySelectorAll(".picker-letter"));
f.addEventListener("click",function(h){h.preventDefault();h=h.target;var l=h.getAttribute("class");l&&-1!=l.trim().indexOf("picker-letter")&&(l=h.getAttribute("data-code"))&&(h.classList.contains("picker-letter-active")?(h.classList.remove("picker-letter-active"),n("*")):(e.forEach(function(q){return q.classList.remove("picker-letter-active")}),h.classList.add("picker-letter-active"),n(l.toLowerCase())))})}function A(){var f=document.getElementById("region-search-input"),e=document.querySelectorAll("#"+
g.ComponentId+" .region-picker-item");f.addEventListener("input",function(){var h=(f.value||"").trim().toLowerCase();h?(Array.from(document.querySelectorAll("#"+g.ComponentId+" .region-letters-container .picker-letter")).forEach(function(l){return l.classList.remove("picker-letter-active")}),e.forEach(function(l){var q=l.querySelector(".region-picker-item-cname").innerText,r=l.querySelector(".region-picker-item-name").innerText.toLowerCase();q.includes(h)||r.includes(h)?l.classList.remove("hide"):
l.classList.add("hide")})):e.forEach(function(l){return l.classList.remove("hide")})})}function w(){var f=document.getElementById(g.ComponentId);f.className+=" hide";g.Visiable=!1;c("submit")}function u(f){if(f){if("string"==typeof f){var e=f.toLowerCase().trim();g.Selected="all"==e?g.RegionList:g.RegionList.filter(function(l){return e==l.code})}else{var h=f.map(function(l){return l.toLowerCase().trim()});g.Selected=g.RegionList.filter(function(l){return h.includes(l.code)})}p();B();v()}}function v(){Array.from(document.querySelectorAll("#"+
g.ComponentId+" input[name=region-picker]")).forEach(function(f){g.Selected.forEach(function(e){f.value===e.code&&(f.checked=!0)})})}function B(){Array.from(document.querySelectorAll("#"+g.ComponentId+" input[name=region-picker]")).forEach(function(f){f.checked&&(f.checked=!1)})}b=void 0===b?{}:b;var g={ComponentId:"",Options:{},BaseDir:"",Selected:[],RegionList:[],Visiable:!1,GetSelected:function(){return this.Selected},Show:function(){var f=document.getElementById(g.ComponentId);f.className=f.className.replace(/\s?hide/g,
"");g.Visiable=!0},Hide:w};return function(f,e){var h="region-picker-"+Math.random().toString(36).slice(-6);g.ComponentId=h;g.Options=e;var l=e.baseDir,q=e.preselected,r=e.visiable;g.RegionList=e.data;g.Visiable=!!r;""!=l&&(g.BaseDir=l+"/");e='\n        <div id="'+h+'" class="region-picker-container '+(g.Visiable?"":"hide")+'">\n          <div class="flex flex-row align-center justify-between">\n              <div class="region-picker-labels no-select">\u9009\u62e9\u67e5\u8be2\u5730\u533a</div>\n              <div class="flex flex-row align-center">\n                  <div class="clickable no-select btn-select-all">\u5168\u9009</div>\n                  <div class="clickable no-select btn-reset">\u91cd\u7f6e</div>\n                  <div class="clickable no-select btn-submit flex flex-center">\u786e\u5b9a</div>\n              </div>\n          </div>\n\n          <div class="region-selected-container no-select flex flex-row flex-wrap"></div>\n\n          <div class="region-search flex flex-row align-center">\n              <input type="text" id="region-search-input" placeholder="\u8fdb\u884c\u533a\u57df\u68c0\u7d22" />\n              <i class="icon-search"></i>\n          </div>\n\n          <div class="region-letters-container no-select "></div>\n          <div class="region-list-conatiner no-select flex flex-row flex-wrap align-start"></div>\n        </div>\n      ';
document.querySelector(f).innerHTML=e;k();m();x();y();z();A();q&&u(q);c("init");return g}(a,b)};}).call(this);
