(function(){var d=d||{};d.scope={};d.createTemplateTagFirstArg=function(a){return a.raw=a};d.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};d.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};d.ASSUME_ES5=!1;d.ASSUME_NO_NATIVE_MAP=!1;d.ASSUME_NO_NATIVE_SET=!1;
d.SIMPLE_FROUND_POLYFILL=!1;d.ISOLATE_POLYFILLS=!1;d.FORCE_POLYFILL_PROMISE=!1;d.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;d.defineProperty=d.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
d.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};d.global=d.getGlobal(this);d.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");d.TRUST_ES6_POLYFILLS=!d.ISOLATE_POLYFILLS||d.IS_SYMBOL_NATIVE;d.polyfills={};d.propertyToPolyfillSymbol={};
d.POLYFILL_PREFIX="$jscp$";d.polyfill=function(a,b,c,k){b&&(d.ISOLATE_POLYFILLS?d.polyfillIsolated(a,b,c,k):d.polyfillUnisolated(a,b,c,k))};d.polyfillUnisolated=function(a,b){var c=d.global;a=a.split(".");for(var k=0;k<a.length-1;k++){var m=a[k];if(!(m in c))return;c=c[m]}a=a[a.length-1];k=c[a];b=b(k);b!=k&&null!=b&&d.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
d.polyfillIsolated=function(a,b,c){var k=a.split(".");a=1===k.length;var m=k[0];m=!a&&m in d.polyfills?d.polyfills:d.global;for(var n=0;n<k.length-1;n++){var p=k[n];if(!(p in m))return;m=m[p]}k=k[k.length-1];c=d.IS_SYMBOL_NATIVE&&"es6"===c?m[k]:null;b=b(c);null!=b&&(a?d.defineProperty(d.polyfills,k,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===d.propertyToPolyfillSymbol[k]&&(a=1E9*Math.random()>>>0,d.propertyToPolyfillSymbol[k]=d.IS_SYMBOL_NATIVE?d.global.Symbol(k):d.POLYFILL_PREFIX+a+"$"+
k),d.defineProperty(m,d.propertyToPolyfillSymbol[k],{configurable:!0,writable:!0,value:b})))};d.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var k=d.checkStringArgs(this,b,"startsWith");b+="";var m=k.length,n=b.length;c=Math.max(0,Math.min(c|0,k.length));for(var p=0;p<n&&c<m;)if(k[c++]!=b[p++])return!1;return p>=n}},"es6","es3");
d.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var k=a.length,m=0;m<k;m++){var n=a[m];if(b.call(c,n,m,a))return{i:m,v:n}}return{i:-1,v:void 0}};d.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return d.findInternal(this,b,c).i}},"es6","es3");
d.polyfill("Array.from",function(a){return a?a:function(b,c,k){c=null!=c?c:function(t){return t};var m=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof n){b=n.call(b);for(var p=0;!(n=b.next()).done;)m.push(c.call(k,n.value,p++))}else for(n=b.length,p=0;p<n;p++)m.push(c.call(k,b[p],p));return m}},"es6","es3");d.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
d.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var k=this;k instanceof String&&(k=String(k));var m=k.length;c=c||0;for(0>c&&(c=Math.max(c+m,0));c<m;c++){var n=k[c];if(n===b||Object.is(n,b))return!0}return!1}},"es7","es3");d.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==d.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
window.RegionPicker=function(a,b){function c(){f.Options&&f.Options.updater&&"function"===typeof f.Options.updater&&(f.Selected=f.Selected.sort(function(g,e){return g.code<e.code?-1:g.code>e.code?1:0}),f.Options.updater(f,f.Selected))}function k(g,e){e='\n      <div id="'+e+'" class="region-picker-container hide">\n        <div class="flex flex-row align-center justify-between">\n            <div class="region-picker-labels no-select">\u9009\u62e9\u67e5\u8be2\u5730\u533a</div>\n            <div class="flex flex-row align-center">\n                <div class="clickable no-select btn-clear-all">\u6e05\u9664\u5168\u90e8</div>\n                <div class="clickable no-select btn-submit flex flex-center">\u786e\u5b9a</div>\n            </div>\n        </div>\n      \n        <div class="region-selected-container no-select flex flex-row flex-wrap"></div>\n      \n        <div class="region-search flex flex-row align-center">\n            <input type="text" id="region-search-input" placeholder="\u8fdb\u884c\u533a\u57df\u68c0\u7d22" />\n            <i class="icon-search"></i>\n        </div>\n      \n        <div class="region-letters-container no-select "></div>\n        <div class="region-list-conatiner no-select flex flex-row flex-wrap align-start"></div>\n      </div>\n    ';
document.querySelector(g).innerHTML=e}function m(){for(var g=f.RegionList.map(function(q){return[(q.name||"").slice(0,1).toUpperCase(),(q.code||"").slice(0,1).toUpperCase()]}).reduce(function(q,u){q[u[0]]=!0;q[u[1]]=!0;return q},{}),e="",h=65;90>=h;h++){var l=String.fromCharCode(h);e=g[l]?e+('<span class="clickable picker-letter" data-code="'+l+'">'+l+" </span>"):e+('<span class="clickable picker-letter-disabled">'+l+" </span>")}document.querySelector("#"+f.ComponentId+" .region-letters-container").innerHTML=
e}function n(){var g=f.RegionList.map(function(e){var h=e.code,l=e.cname;return'\n      <div class="region-picker-item">\n        <label for="region-picker-'+h+'" class="clickable flex flex-row align-center" data-code="'+h+'">\n          <div class="region-checkbox">\n              <input id="region-picker-'+h+'" type="checkbox" name="region-picker" value="'+h+'" />\n              <span class="region-checkbox-elem"></span>\n          </div>\n          <img src="'+f.BaseDir+"assets/region-icon/"+("uk"===
h?"gb":"tw"===h?"cn":h)+'.svg" loading="lazy" alt="'+l+'" />\n          <div class="flex flex-col">\n              <div class="region-picker-item-cname">'+l+'</div>\n              <div class="region-picker-item-name">'+e.name+"</div>\n          </div>\n        </label>\n      </div>"});document.querySelector("#"+f.ComponentId+" .region-list-conatiner").innerHTML=g.join("")}function p(g){document.querySelectorAll("#"+f.ComponentId+" .region-picker-item").forEach(function(e){if("*"===g)e.classList.remove("hide");
else{var h=e.querySelector(".region-picker-item-name").innerText,l=e.querySelector("label").getAttribute("data-code");h.startsWith(g)||l.startsWith(g)?e.classList.remove("hide"):e.classList.add("hide")}})}function t(){var g=f.Selected.map(function(e){var h=e.cname,l=e.code;e.icon="uk"===l?"gb":"tw"===l?"cn":l;return'\n      <div class="region-item-selected flex flex-row flex-center" data-code="'+l+'">\n        <span>'+h+'</span>\n        <img class="clickable btn-remove-selected" src="'+f.BaseDir+
'assets/img/icon-close.svg" alt="" />\n      </div>'});f.TriggerEachClick&&c();document.querySelector("#"+f.ComponentId+" .region-selected-container").innerHTML=g.join("")}function x(g){if(g){var e=f.Selected,h=e.findIndex(function(l){return l.code===g});e.splice(h,1);f.Selected=e;t()}}function y(){document.querySelector("#"+f.ComponentId+" .region-selected-container").addEventListener("click",function(g){g.preventDefault();g=g.target;if(-1!==(g.className||"").trim().indexOf("btn-remove-selected")){var e=
g.parentElement.getAttribute("data-code");x(e);t();Array.from(document.getElementsByName("region-picker")).forEach(function(h){h.value===e&&(h.checked=!1)})}});document.querySelector("#"+f.ComponentId+" .btn-clear-all").addEventListener("click",function(g){g.preventDefault();f.Selected=[];t();Array.from(document.getElementsByName("region-picker")).forEach(function(e){e.checked=!1})})}function z(){document.querySelector("#"+f.ComponentId+" .region-list-conatiner").addEventListener("click",function(g){(g=
g.target.closest("label"))&&g.matches(".region-picker-item label")&&setTimeout(function(){var e=Array.from(document.getElementsByName("region-picker")).filter(function(h){return h.checked}).map(function(h){return h.value});f.Selected=f.RegionList.filter(function(h){return e.includes(h.code)});t()},10)})}function A(){var g=document.querySelector("#"+f.ComponentId+" .region-letters-container"),e=Array.from(g.querySelectorAll(".picker-letter"));g.addEventListener("click",function(h){h.preventDefault();
h=h.target;var l=h.getAttribute("class");l&&-1!=l.trim().indexOf("picker-letter")&&(l=h.getAttribute("data-code"))&&(h.classList.contains("picker-letter-active")?(h.classList.remove("picker-letter-active"),p("*")):(e.forEach(function(q){return q.classList.remove("picker-letter-active")}),h.classList.add("picker-letter-active"),p(l.toLowerCase())))})}function B(){var g=document.getElementById("region-search-input"),e=document.querySelectorAll("#"+f.ComponentId+" .region-picker-item");g.addEventListener("input",
function(){var h=(g.value||"").trim().toLowerCase();h?(Array.from(document.querySelectorAll("#"+f.ComponentId+" .region-letters-container .picker-letter")).forEach(function(l){return l.classList.remove("picker-letter-active")}),e.forEach(function(l){var q=l.querySelector(".region-picker-item-cname").innerText,u=l.querySelector(".region-picker-item-name").innerText.toLowerCase();q.includes(h)||u.includes(h)?l.classList.remove("hide"):l.classList.add("hide")})):e.forEach(function(l){return l.classList.remove("hide")})})}
function C(){document.querySelector("#"+f.ComponentId+" .btn-submit").addEventListener("click",function(){c();v()})}function v(){var g=document.getElementById(f.ComponentId);g.className+=" hide"}b=void 0===b?{}:b;var f={ComponentId:"",Options:{},BaseDir:"",Selected:[],RegionList:[],TriggerEachClick:!1,GetSelected:function(){return this.Selected},Show:function(){var g=document.getElementById(f.ComponentId);g.className=g.className.replace(/\s?hide/g,"")},Hide:v};return function(g,e){var h="region-picker-"+
Math.random().toString(36).slice(-6);f.ComponentId=h;f.Options=e;var l=e.baseDir,q=e.preselected,u=e.triggerEachClick;f.RegionList=e.data;f.TriggerEachClick=u||!1;""!=l&&(f.BaseDir=l+"/");k(g,h);m();n();y();z();A();B();C();if(q){if("string"==typeof q){var w=q.toLowerCase().trim();f.Selected="all"==w?f.RegionList:f.RegionList.filter(function(r){return w==r.code})}else{var D=q.map(function(r){return r.toLowerCase().trim()});f.Selected=f.RegionList.filter(function(r){return D.includes(r.code)})}t();
Array.from(document.querySelectorAll("#"+f.ComponentId+" input[name=region-picker]")).forEach(function(r){f.Selected.forEach(function(E){r.value===E.code&&(r.checked=!0)})})}c();return f}(a,b)};}).call(this);
