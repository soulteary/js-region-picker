(function(){var d=d||{};d.scope={};d.createTemplateTagFirstArg=function(a){return a.raw=a};d.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};d.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};d.ASSUME_ES5=!1;d.ASSUME_NO_NATIVE_MAP=!1;d.ASSUME_NO_NATIVE_SET=!1;
d.SIMPLE_FROUND_POLYFILL=!1;d.ISOLATE_POLYFILLS=!1;d.FORCE_POLYFILL_PROMISE=!1;d.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;d.defineProperty=d.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
d.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};d.global=d.getGlobal(this);d.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");d.TRUST_ES6_POLYFILLS=!d.ISOLATE_POLYFILLS||d.IS_SYMBOL_NATIVE;d.polyfills={};d.propertyToPolyfillSymbol={};
d.POLYFILL_PREFIX="$jscp$";d.polyfill=function(a,b,c,g){b&&(d.ISOLATE_POLYFILLS?d.polyfillIsolated(a,b,c,g):d.polyfillUnisolated(a,b,c,g))};d.polyfillUnisolated=function(a,b){var c=d.global;a=a.split(".");for(var g=0;g<a.length-1;g++){var m=a[g];if(!(m in c))return;c=c[m]}a=a[a.length-1];g=c[a];b=b(g);b!=g&&null!=b&&d.defineProperty(c,a,{configurable:!0,writable:!0,value:b})};
d.polyfillIsolated=function(a,b,c){var g=a.split(".");a=1===g.length;var m=g[0];m=!a&&m in d.polyfills?d.polyfills:d.global;for(var n=0;n<g.length-1;n++){var p=g[n];if(!(p in m))return;m=m[p]}g=g[g.length-1];c=d.IS_SYMBOL_NATIVE&&"es6"===c?m[g]:null;b=b(c);null!=b&&(a?d.defineProperty(d.polyfills,g,{configurable:!0,writable:!0,value:b}):b!==c&&(void 0===d.propertyToPolyfillSymbol[g]&&(a=1E9*Math.random()>>>0,d.propertyToPolyfillSymbol[g]=d.IS_SYMBOL_NATIVE?d.global.Symbol(g):d.POLYFILL_PREFIX+a+"$"+
g),d.defineProperty(m,d.propertyToPolyfillSymbol[g],{configurable:!0,writable:!0,value:b})))};d.polyfill("String.prototype.startsWith",function(a){return a?a:function(b,c){var g=d.checkStringArgs(this,b,"startsWith");b+="";var m=g.length,n=b.length;c=Math.max(0,Math.min(c|0,g.length));for(var p=0;p<n&&c<m;)if(g[c++]!=b[p++])return!1;return p>=n}},"es6","es3");
d.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var g=a.length,m=0;m<g;m++){var n=a[m];if(b.call(c,n,m,a))return{i:m,v:n}}return{i:-1,v:void 0}};d.polyfill("Array.prototype.findIndex",function(a){return a?a:function(b,c){return d.findInternal(this,b,c).i}},"es6","es3");
d.polyfill("Array.from",function(a){return a?a:function(b,c,g){c=null!=c?c:function(u){return u};var m=[],n="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];if("function"==typeof n){b=n.call(b);for(var p=0;!(n=b.next()).done;)m.push(c.call(g,n.value,p++))}else for(n=b.length,p=0;p<n;p++)m.push(c.call(g,b[p],p));return m}},"es6","es3");d.polyfill("Object.is",function(a){return a?a:function(b,c){return b===c?0!==b||1/b===1/c:b!==b&&c!==c}},"es6","es3");
d.polyfill("Array.prototype.includes",function(a){return a?a:function(b,c){var g=this;g instanceof String&&(g=String(g));var m=g.length;c=c||0;for(0>c&&(c=Math.max(c+m,0));c<m;c++){var n=g[c];if(n===b||Object.is(n,b))return!0}return!1}},"es7","es3");d.polyfill("String.prototype.includes",function(a){return a?a:function(b,c){return-1!==d.checkStringArgs(this,b,"includes").indexOf(b,c||0)}},"es6","es3");
window.RegionPicker=function(a,b){function c(k){h.Options&&h.Options.updater&&"function"===typeof h.Options.updater&&(h.Selected=h.Selected.sort(function(e,f){return e.code<f.code?-1:e.code>f.code?1:0}),h.Options.updater(h.Selected,k,h))}function g(k,e){e='\n        <div id="'+e+'" class="region-picker-container hide">\n          <div class="flex flex-row align-center justify-between">\n              <div class="region-picker-labels no-select">\u9009\u62e9\u67e5\u8be2\u5730\u533a</div>\n              <div class="flex flex-row align-center">\n                  <div class="clickable no-select btn-clear-all">\u6e05\u9664\u5168\u90e8</div>\n                  <div class="clickable no-select btn-submit flex flex-center">\u786e\u5b9a</div>\n              </div>\n          </div>\n\n          <div class="region-selected-container no-select flex flex-row flex-wrap"></div>\n\n          <div class="region-search flex flex-row align-center">\n              <input type="text" id="region-search-input" placeholder="\u8fdb\u884c\u533a\u57df\u68c0\u7d22" />\n              <i class="icon-search"></i>\n          </div>\n\n          <div class="region-letters-container no-select "></div>\n          <div class="region-list-conatiner no-select flex flex-row flex-wrap align-start"></div>\n        </div>\n      ';
document.querySelector(k).innerHTML=e}function m(){for(var k=h.RegionList.map(function(q){return[(q.name||"").slice(0,1).toUpperCase(),(q.code||"").slice(0,1).toUpperCase()]}).reduce(function(q,t){q[t[0]]=!0;q[t[1]]=!0;return q},{}),e="",f=65;90>=f;f++){var l=String.fromCharCode(f);e=k[l]?e+('<span class="clickable picker-letter" data-code="'+l+'">'+l+" </span>"):e+('<span class="clickable picker-letter-disabled">'+l+" </span>")}document.querySelector("#"+h.ComponentId+" .region-letters-container").innerHTML=
e}function n(){var k=h.RegionList.map(function(e){var f=e.code,l=e.cname;return'\n        <div class="region-picker-item">\n          <label for="region-picker-'+f+'" class="clickable flex flex-row align-center" data-code="'+f+'">\n            <div class="region-checkbox">\n                <input id="region-picker-'+f+'" type="checkbox" name="region-picker" value="'+f+'" />\n                <span class="region-checkbox-elem"></span>\n            </div>\n            <img src="'+h.BaseDir+"assets/region-icon/"+
("uk"===f?"gb":"tw"===f?"cn":f)+'.svg" loading="lazy" alt="'+l+'" />\n            <div class="flex flex-col">\n                <div class="region-picker-item-cname">'+l+'</div>\n                <div class="region-picker-item-name">'+e.name+"</div>\n            </div>\n          </label>\n        </div>"});document.querySelector("#"+h.ComponentId+" .region-list-conatiner").innerHTML=k.join("")}function p(k){document.querySelectorAll("#"+h.ComponentId+" .region-picker-item").forEach(function(e){if("*"===
k)e.classList.remove("hide");else{var f=e.querySelector(".region-picker-item-name").innerText,l=e.querySelector("label").getAttribute("data-code");f.startsWith(k)||l.startsWith(k)?e.classList.remove("hide"):e.classList.add("hide")}})}function u(){var k=h.Selected.map(function(e){var f=e.cname,l=e.code;e.icon="uk"===l?"gb":"tw"===l?"cn":l;return'\n        <div class="region-item-selected flex flex-row flex-center" data-code="'+l+'">\n          <span>'+f+'</span>\n          <img class="clickable btn-remove-selected" src="'+
h.BaseDir+'assets/img/icon-close.svg" alt="" />\n        </div>'});c("change");document.querySelector("#"+h.ComponentId+" .region-selected-container").innerHTML=k.join("")}function w(k){if(k){var e=h.Selected,f=e.findIndex(function(l){return l.code===k});e.splice(f,1);h.Selected=e}}function x(){document.getElementById(h.ComponentId).addEventListener("click",function(k){var e=k.target;if(e)if(e.closest(".region-selected-container")){if(-1!==(e.className||"").trim().indexOf("btn-remove-selected")){var f=
e.parentElement.getAttribute("data-code");w(f);u();Array.from(document.getElementsByName("region-picker")).forEach(function(l){l.value===f&&(l.checked=!1)})}}else e.closest(".btn-clear-all")?(k.preventDefault(),h.Selected=[],u(),Array.from(document.getElementsByName("region-picker")).forEach(function(l){l.checked=!1})):e.closest(".btn-submit")&&(k.preventDefault(),c("submit"),v())})}function y(){document.querySelector("#"+h.ComponentId+" .region-list-conatiner").addEventListener("click",function(k){(k=
k.target.closest("label"))&&k.matches(".region-picker-item label")&&setTimeout(function(){var e=Array.from(document.getElementsByName("region-picker")).filter(function(f){return f.checked}).map(function(f){return f.value});h.Selected=h.RegionList.filter(function(f){return e.includes(f.code)});u()},10)})}function z(){var k=document.querySelector("#"+h.ComponentId+" .region-letters-container"),e=Array.from(k.querySelectorAll(".picker-letter"));k.addEventListener("click",function(f){f.preventDefault();
f=f.target;var l=f.getAttribute("class");l&&-1!=l.trim().indexOf("picker-letter")&&(l=f.getAttribute("data-code"))&&(f.classList.contains("picker-letter-active")?(f.classList.remove("picker-letter-active"),p("*")):(e.forEach(function(q){return q.classList.remove("picker-letter-active")}),f.classList.add("picker-letter-active"),p(l.toLowerCase())))})}function A(){var k=document.getElementById("region-search-input"),e=document.querySelectorAll("#"+h.ComponentId+" .region-picker-item");k.addEventListener("input",
function(){var f=(k.value||"").trim().toLowerCase();f?(Array.from(document.querySelectorAll("#"+h.ComponentId+" .region-letters-container .picker-letter")).forEach(function(l){return l.classList.remove("picker-letter-active")}),e.forEach(function(l){var q=l.querySelector(".region-picker-item-cname").innerText,t=l.querySelector(".region-picker-item-name").innerText.toLowerCase();q.includes(f)||t.includes(f)?l.classList.remove("hide"):l.classList.add("hide")})):e.forEach(function(l){return l.classList.remove("hide")})})}
function v(){var k=document.getElementById(h.ComponentId);k.className+=" hide";c("submit")}b=void 0===b?{}:b;var h={ComponentId:"",Options:{},BaseDir:"",Selected:[],RegionList:[],GetSelected:function(){return this.Selected},Show:function(){var k=document.getElementById(h.ComponentId);k.className=k.className.replace(/\s?hide/g,"")},Hide:v};return function(k,e){var f="region-picker-"+Math.random().toString(36).slice(-6);h.ComponentId=f;h.Options=e;var l=e.baseDir,q=e.preselected;h.RegionList=e.data;
""!=l&&(h.BaseDir=l+"/");g(k,f);m();n();x();y();z();A();if(q){if("string"==typeof q){var t=q.toLowerCase().trim();h.Selected="all"==t?h.RegionList:h.RegionList.filter(function(r){return t==r.code})}else{var B=q.map(function(r){return r.toLowerCase().trim()});h.Selected=h.RegionList.filter(function(r){return B.includes(r.code)})}u();Array.from(document.querySelectorAll("#"+h.ComponentId+" input[name=region-picker]")).forEach(function(r){h.Selected.forEach(function(C){r.value===C.code&&(r.checked=!0)})})}c("init");
return h}(a,b)};}).call(this);
